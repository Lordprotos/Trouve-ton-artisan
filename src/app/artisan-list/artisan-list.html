<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-xl-10 col-lg-11">
      <header class="text-center mb-4">
        <h1 class="display-5 text-primary">Nos Artisans</h1>
        <p class="lead text-muted">D√©couvrez notre r√©seau d'artisans qualifi√©s</p>
      </header>

      <div class="row mb-3">
        <div class="col-lg-8">
          <div class="input-group">
            <input 
              type="text" 
              class="form-control"
              placeholder="Rechercher un artisan, une sp√©cialit√©, une ville..." 
              [(ngModel)]="searchTerm"
              (input)="onSearch()"
              aria-label="Rechercher un artisan"
            >
            <span class="input-group-text" aria-hidden="true">
              üîç
            </span>
          </div>
        </div>
        <div class="col-lg-4">
          <select 
            [(ngModel)]="selectedCategory"
            (change)="onCategoryChange()"
            class="form-select"
            aria-label="Filtrer par cat√©gorie"
          >
            <option *ngFor="let category of categories" [value]="category">
              {{ category }}
            </option>
          </select>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-12">
          <div class="alert alert-info py-2">
            <strong>{{ filteredArtisans.length }}</strong> artisan(s) trouv√©(s)
            <small class="ms-3 text-muted">Total: {{ artisans.length }}</small>
          </div>
        </div>
      </div>

      <div class="row g-3">
        <div 
          *ngFor="let artisan of filteredArtisans" 
          class="col-xl-4 col-lg-6"
        >
          <div class="card h-100" [class.border-warning]="artisan.top">
            <!-- Badge pour les artisans recommand√©s -->
            <div *ngIf="artisan.top" class="position-absolute top-0 start-50 translate-middle">
              <span class="badge bg-warning text-dark px-2 py-1">
                Recommand√©
              </span>
            </div>

            <div class="card-body p-3">
                <!-- Header de la carte -->
                <div class="d-flex justify-content-between align-items-start mb-2">
                  <h6 class="card-title text-primary mb-0">{{ artisan.name }}</h6>
                  <span class="badge bg-secondary small">{{ artisan.category }}</span>
                </div>

                <!-- Sp√©cialit√© -->
                <div class="mb-2">
                  <span class="badge bg-primary small">{{ artisan.specialty }}</span>
                </div>

                <!-- Note et localisation -->
                <div class="mb-2">
                  <div class="d-flex align-items-center justify-content-between">
                    <span class="text-warning small">
                      ‚òÖ {{ artisan.note }}/5
                    </span>
                    <small class="text-muted">
                      {{ artisan.location }}
                    </small>
                  </div>
                </div>

                <!-- Description -->
                <p class="card-text small text-muted mb-2 description-clamp">
                  {{ artisan.about }}
                </p>
              </div>

              <!-- Footer de la carte -->
              <div class="card-footer bg-transparent border-0 p-2">
                <div class="d-flex gap-1 flex-wrap">
                  <a 
                    [routerLink]="['/artisan', artisan.id]"
                    class="btn btn-primary btn-sm flex-grow-1"
                  >
                    Voir la fiche
                  </a>
                  <a 
                    *ngIf="artisan.email"
                    href="mailto:{{ artisan.email }}" 
                    class="btn btn-outline-primary btn-sm flex-grow-1"
                  >
                    Contact
                  </a>
                </div>
                <div *ngIf="artisan.website" class="mt-1">
                  <a 
                    [href]="artisan.website" 
                    target="_blank" 
                    class="btn btn-outline-secondary btn-sm w-100"
                  >
                    Site web
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Message si aucun r√©sultat -->
      <div *ngIf="filteredArtisans.length === 0" class="row">
        <div class="col-12">
          <div class="alert alert-warning text-center">
            <h4>Aucun artisan trouv√©</h4>
            <p>Veuillez modifier vos crit√®res de recherche.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
